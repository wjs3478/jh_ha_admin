<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>SB Admin 2 - Bootstrap Admin Theme</title>

    <!-- Bootstrap Core CSS -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="../vendor/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../dist/css/sb-admin-2.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="../vendor/morrisjs/morris.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">HA-Admin</a>
            </div>
            <!-- /.navbar-header -->

            <ul class="nav navbar-top-links navbar-right">
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-envelope fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-messages">
                        <li>
                            <a href="#">
                                <div>
                                    <strong>John Smith</strong>
                                    <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                                </div>
                                <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <strong>John Smith</strong>
                                    <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                                </div>
                                <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <strong>John Smith</strong>
                                    <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                                </div>
                                <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>Read All Messages</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-messages -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-tasks fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-tasks">
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 1</strong>
                                        <span class="pull-right text-muted">40% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                                            <span class="sr-only">40% Complete (success)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 2</strong>
                                        <span class="pull-right text-muted">20% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
                                            <span class="sr-only">20% Complete</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 3</strong>
                                        <span class="pull-right text-muted">60% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                            <span class="sr-only">60% Complete (warning)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <p>
                                        <strong>Task 4</strong>
                                        <span class="pull-right text-muted">80% Complete</span>
                                    </p>
                                    <div class="progress progress-striped active">
                                        <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%">
                                            <span class="sr-only">80% Complete (danger)</span>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>See All Tasks</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-tasks -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-bell fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-alerts">
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-comment fa-fw"></i> New Comment
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                    <span class="pull-right text-muted small">12 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-envelope fa-fw"></i> Message Sent
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-tasks fa-fw"></i> New Task
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>See All Alerts</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-alerts -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                        </li>
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="login.html"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
            <!-- /.navbar-top-links -->

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <li class="sidebar-search">
                            <div class="input-group custom-search-form">
                                <input type="text" class="form-control" placeholder="Search...">
                                <span class="input-group-btn">
                                <button class="btn btn-default" type="button">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                            </div>
                            <!-- /input-group -->
                        </li>
                        <li>
                            <a href="index.html"><i class="fa fa-dashboard fa-fw"></i>이중화</a>
                        </li>
  
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>
        
        
       

        

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="../vendor/jquery/jquery-3.2.1.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../vendor/metisMenu/metisMenu.min.js"></script>

    <!-- Morris Charts JavaScript -->
    <script src="../vendor/raphael/raphael.min.js"></script>
    <script src="../vendor/morrisjs/morris.min.js"></script>
    <script src="../data/morris-data.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../dist/js/sb-admin-2.js"></script>

	<div id="page-wrapper">
		<br>
        <button id="adding" class="btn btn-default">새로고침</button>
        <button id="data_sync" class="btn btn-default"  data-sh-text="<span class='glyphicon glyphicon-pause' aria-hidden='true'></span> 데이터 동기화 중지" aria-pressed="false">
        	<span class="glyphicon glyphicon-play" aria-hidden="true"></span> 데이터 동기화 실행
        </button>
        <button id="vip_set" class="btn btn-default">
        	<span class="glyphicon glyphicon-cog" aria-hidden="true"></span> 가상IP 설정</button>
        <div class="checkbox">
		  <label>
		    <input name="synck" type="checkbox" id="ck1" value="1">
		    SYNC1
		  </label>
		</div>
		<div class="checkbox">
		  <label>
		    <input name="synck" type="checkbox" id="ck2" value="2">
		    SYNC2
		  </label>
		</div>
                        
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        
        <div id="box" style="display:flex;">
        
	        <div id="linkbox" style="flex:2" align="center">
	        	<h3><span id="link_stat" class="label label-success">Link Success</span></h3>
	        	<hr id="link_solid" style="border: solid 5px green;">
	        </div>
        </div>
        <br>
        <br>
        <div id="page-footer">
	   		<form class="form-horizontal">
	   		
				   	<div>
					  <label class="checkbox-inline">
					    <input name="cmdck" type="checkbox" id="cmd_ck1" value="1">
					    Server1
					  </label>
					
					
					  <label class="checkbox-inline">
					    <input name="cmdck" type="checkbox" id="cmd_ck2" value="2">
					    Server2
					  </label>
					</div>
	   		
	   		    <textarea id="result" class="form-control" rows="5" readonly></textarea>
	   		       		 	
	   		 	  <div class="form-inline">
	   		 	  			 <label class="sr-only" for="dumy">dumy</label>
	   		 	  		 	 <input type="text" class="form-control" style="width: 94%" id="cmd" placeholder="Command">
	   		 	  			 <button type="button" id="sendConsole" class="btn btn-default" style="width: 5.5%">Send</button>
				  </div>
	   		</form>
	   </div>
   </div>
   
   

<ul id="contextMenu" class="dropdown-menu" role="menu" style="display:none" >
    <li id="standby"><a tabindex="-1" >fail over</a></li>
    <li><a tabindex="-1" href="#">cpu info</a></li>
    <li><a tabindex="-1" href="#">os info</a></li>
    <li><a tabindex="-1" href="#">disk info</a></li>
    <!-- <li class="divider"></li> -->
    <li><a tabindex="-1" href="#">memory info</a></li>
    <li><a tabindex="-1" href="#">setting</a></li>
    <li><a tabindex="-1" href="#">sync setting</a></li>
    <li id="lock" data-jh-text="<a tabindex='-1' href='#'>unlock</a>"><a tabindex="-1" href="#">lock</a></li>
</ul>


<div class="modal fade"  id="myModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 id="svm" class="modal-title">Setting</h4>
      </div>
      <div class="modal-body">
      <form class="form-horizontal">
    
        <div class="form-group">
        	<label for="IP1" class="col-sm-2 control-label">IP</label>
        	<div class="col-sm-10"> 
        		<input id="serverip" type="text" class="form-control" placeholder="IP address">
        	</div>
        </div>
        
        <div class="form-group">
        	<label for="ID1" class="col-sm-2 control-label">ID</label>
        	<div class="col-sm-10"> 
        		<input id="serverid" type="text" class="form-control" placeholder="ID">
        	</div>
        </div>
        
        <div class="form-group">
        	<label for="PASS1" class="col-sm-2 control-label">PASSWORD</label>
        	<div class="col-sm-10"> 
        		<input id="serverpw" type="password" class="form-control" placeholder="PASSWORD">
        	</div>
        </div>

                
        </form>
      </div>
      <div class="modal-footer">
        <button id="save_set" type="button" class="btn btn-primary">Save changes</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->



<div class="modal fade"  id="dataSyn">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 id="svm" class="modal-title">sync dir</h4>
      </div>
      <div class="modal-body">
      <form class="form-horizontal">
    
        <div class="form-group">
        	<label for="syncor1" class="col-sm-3 control-label">origin dir1</label>
        	<div class="col-sm-9"> 
        		<input id="syncto1" type="text" class="form-control" placeholder="sync origin dir">
        	</div>
        </div>
        
         <div class="form-group">
        	<label for="syncre1" class="col-sm-3 control-label">remote dir1</label>
        	<div class="col-sm-9"> 
        		<input id="syncfrom1" type="text" class="form-control" placeholder="sync remote dir">
        	</div>
        </div>
        
        <div class="form-group">
        	<label for="syncID1" class="col-sm-3 control-label">remoteID1</label>
        	<div class="col-sm-9"> 
        		<input id="syncid1" type="text" class="form-control" placeholder="remote ID">
        	</div>
        </div>
        
        <div class="form-group">
        	<label for="syncPASS1" class="col-sm-3 control-label">remotePW1</label>
        	<div class="col-sm-9"> 
        		<input id="syncpw1" type="password" class="form-control" placeholder="remote PASSWORD">
        	</div>
        </div>
        
        <div class="form-group">
        	<label for="syncor2" class="col-sm-3 control-label">origin dir2</label>
        	<div class="col-sm-9"> 
        		<input id="syncto2" type="text" class="form-control" placeholder="sync origin dir">
        	</div>
        </div>
        
         <div class="form-group">
        	<label for="syncre2" class="col-sm-3 control-label">remote dir2</label>
        	<div class="col-sm-9"> 
        		<input id="syncfrom2" type="text" class="form-control" placeholder="sync remote dir">
        	</div>
        </div>
        
        <div class="form-group">
        	<label for="syncID2" class="col-sm-3 control-label">remoteID2</label>
        	<div class="col-sm-9"> 
        		<input id="syncid2" type="text" class="form-control" placeholder="remote ID">
        	</div>
        </div>
        
        <div class="form-group">
        	<label for="syncPASS2" class="col-sm-3 control-label">remotePW2</label>
        	<div class="col-sm-9"> 
        		<input id="syncpw2" type="password" class="form-control" placeholder="remote PASSWORD">
        	</div>
        </div>
        
        </form>
      </div>
      <div class="modal-footer">
        <button id="sync_set" type="button" class="btn btn-primary">Save changes</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->



<div class="modal fade"  id="vip_setting">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 id="svm" class="modal-title">Setting</h4>
      </div>
      <div class="modal-body">
      <form class="form-horizontal">
    
        <div class="form-group">
        	<label for="sv_IP1" class="col-sm-2 control-label">IP1</label>
        	<div class="col-sm-10"> 
        		<input id="sv1ip_set" type="text" class="form-control" placeholder="Server1 IP address">
        	</div>
        </div>
        
        <div class="form-group">
        	<label for="sv_IP2" class="col-sm-2 control-label">IP2</label>
        	<div class="col-sm-10"> 
        		<input id="sv2ip_set" type="text" class="form-control" placeholder="Server2 IP address">
        	</div>
        </div>

        <div class="form-group">
        	<label for="VIP" class="col-sm-2 control-label">Virtual IP</label>
        	<div class="col-sm-10"> 
        		<input id="vip_set_text" type="text" class="form-control" placeholder="Virtual IP">
        	</div>
        </div>
        
        </form>
      </div>
      <div class="modal-footer">
        <button id="save_vip" type="button" class="btn btn-primary">Save changes</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->





   
   <script>
	var data="";
	
	var c=0;
	
	var s_num=0;	//서버 넘버
	
	var test=null; //임시	
	 (function ($, window) {

	    $.fn.contextMenu = function (settings) {

	        return this.each(function () {

	            // Open context menu
	            $(this).on("contextmenu", function (e) {
	                // return native menu if pressing control
	                
	                if (e.ctrlKey) return;
	                
	                //console.log(e);
	                var ip=e.currentTarget.innerText;
	                var server=e.currentTarget.id
	                //console.log(e.currentTarget.className);
	                if(e.currentTarget.className=='active')
	                {
	                	$("#standby").removeClass();
	                	$("#lock").removeClass();
	                }else
	                {
	                	$("#standby").addClass("disabled");
	                	$("#lock").addClass("disabled");
	                }
	                //class="disabled"
	                //open menu
	                var $menu = $(settings.menuSelector)
	                    .data("invokedOn", ip)
	                    .data("server",server)
	                    .show()
	                    .css({
	                        position: "absolute",
	                        left: getMenuPosition(e.clientX, 'width', 'scrollLeft'),
	                        top: getMenuPosition(e.clientY, 'height', 'scrollTop')
	                    })
	                    .off('click')
	                    .on('click', 'a', function (e) {
	                    	if(e.target.parentElement.className=="disabled"){
	                    		return false;}
	                    	
	                        $menu.hide();
	                        var $invokedOn = $menu.data("invokedOn");
	                        var $server = $menu.data("server");
	                        var $selectedMenu = $(e.target);
	                        
	                        //var $clas=$(e.target.className);
	                        
	                        settings.menuSelected.call(this, $invokedOn, $selectedMenu,$server);
	                    });
	                
	                return false;
	            });

	            //make sure menu closes on any click
	            $('body').click(function () {
	                $(settings.menuSelector).hide();
	            });
	        });
	        
	        function getMenuPosition(mouse, direction, scrollDir) {
	            var win = $(window)[direction](),
	                scroll = $(window)[scrollDir](),
	                menu = $(settings.menuSelector)[direction](),
	                position = mouse + scroll;
	                        
	            // opening menu would pass the side of the page
	            if (mouse + menu > win && menu < mouse) 
	                position -= menu;
	            
	            return position;
	        }    

	    };
	})(jQuery, window); 
	
	
	
   
   $(document).ready(
		   function(){
			   		   
				  // makeImg('192.168.23.130');
				 // makeImg('192.168.23.131');
				   fun_init();
				   //$("#box")
				  
				   $("#adding").bind("click",review);
				   $("#sendConsole").bind("click",cmdSend);
				   $("#save_set").bind("click",save_setting);
				   $("#sync_set").bind("click",sync_setting);
				   $("#save_vip").bind("click",vip_save);
				   $("#data_sync").bind("click",sync);
				   $("#vip_set").bind("click",function(){
					   
					   $('#sv1ip_set').val(data.server1_ip);
					   $('#sv2ip_set').val(data.server2_ip);
					   $('#vip_set_text').val(data.sv_vip);
					   $('#vip_setting').modal({backdrop: 'static'}) ;
			   			$('#vip_setting').modal('show');
				   });
				   				   
				   //$("#adding").bind("click",cpuinfo);
				  // review();
				  //setInterval(review,60000);
		   }
   );
   
   function context_excute(invokedOn, selectedMenu,server)
   {
	   
	  /*  var msg = "You selected the menu item '" + selectedMenu.text() +
       "' on the value '" + invokedOn + "'";
   	alert(msg); */
   		//console.log(server);
   		var cmd=selectedMenu.text().trim();
   		
   		var ip=invokedOn.trim();
   		
   		s_num=server.substr(server.length-1,1);
   		
   		if(cmd=='cpu info')
   		{
   			ssh_test(ip,"cpu",s_num);	
   		}else if(cmd=='os info')
   		{
   			ssh_test(ip,"os",s_num);
   		}else if(cmd=='disk info')
   		{
   			ssh_test(ip,"dh",s_num);
   		}else if(cmd=='memory info')
   		{
   			ssh_test(ip,"mem",s_num);
   		}else if(cmd=='fail over')
   		{
   			ssh_test(ip,"standby",s_num);
   		}else if(cmd=='setting')
   		{
   			//console.log(ip);
   			$('#serverip').val(ip);
   			
   			if(data.server1_ip==ip)
   			{
   				$('#serverid').val(data.server1_id);
   				$('#serverpw').val('');
   				$('#serversync').val(data.server1_sync);
   			}else
   			{
   				$('#serverid').val(data.server2_id);
   				$('#serverpw').val('');
   				$('#serversync').val(data.server2_sync);
   			}
   				
   			$('#myModal').modal({backdrop: 'static'}) ;
   			$('#myModal').modal('show');
   			
   			
   		}else if(cmd=='sync setting')
   		{
   			
   			
   			
			//$('#serverip').val(ip);
   			
   			if(data.server1_ip==ip)
   			{
   				$('#syncto1').val(data.sv1_sync1_origin_dir);
   				$('#syncfrom1').val(data.sv1_sync1_remote_dir);
   				$('#syncid1').val(data.sv1_sync1_remote_id);
   				$('#syncto2').val(data.sv1_sync2_origin_dir);
   				$('#syncfrom2').val(data.sv1_sync2_remote_dir);
   				$('#syncid2').val(data.sv1_sync2_remote_id);
   			}else
   			{
   				$('#syncto1').val(data.sv2_sync1_origin_dir);
   				$('#syncfrom1').val(data.sv2_sync1_remote_dir);
   				$('#syncid1').val(data.sv2_sync1_remote_id);
   				$('#syncto2').val(data.sv2_sync2_origin_dir);
   				$('#syncfrom2').val(data.sv2_sync2_remote_dir);
   				$('#syncid2').val(data.sv2_sync2_remote_id);
   			}
   				
   			$('#dataSyn').modal({backdrop: 'static'}) ;
   			$('#dataSyn').modal('show');
   		}else if(cmd=='lock')
   		{
   			
   			ssh_test(ip,"lock",s_num);
   		}else if(cmd=='unlock')
   		{
   			ssh_test(ip,"unlock",s_num);
   		}
   }
   
   
   
   function fun_init()
   {
	   
		    $.ajax({
		        url : "../../init_load.tdo",
		        type: "get",
   
		        success : function(responseData){
		            //$("#ajax").remove();
		            data=responseData;
		            console.log(data);
		            
		            
		            makeImg(data.server1_ip);
		            makeImg(data.server2_ip);
		        }
		    });
		
   }
   
   
   
   function save_setting()
   {
	   
	   if($("#serverpw").val()=='' || $("#serverpw").val()==null)
		{
		 	alert("비밀번호를 입력해주세요");
		 	return;
		}
	   
	    $.ajax({
	        url : "../../setting.tdo",
	        type: "post",
	        data:{
	        	"ip" : $("#serverip").val(),
	        	"id" : $("#serverid").val(),
	        	"pw" : $("#serverpw").val(),
	        	//"sync" : $("#serversync").val(),
	        	"s_num" : s_num
	        	
	        },

	        success : function(responseData){
	            //$("#ajax").remove();
	            //data=responseData;
	            console.log(responseData);
	            if(responseData==0){
	            	alert("성공적으로 저장되었습니다.");
	            	$('#myModal').modal('hide');
	            	window.location.reload();
	            }else
	            {
	            	alert("저장에 실패했습니다.");
	            }
	            
	           // makeImg(data.server1_ip);
	           // makeImg(data.server2_ip);
	        }
	    });
   }
   
   function vip_save()
   {
	   
	   
	    $.ajax({
	        url : "../../vip_save.tdo",
	        type: "post",
	        data:{
	        	"ip1" : $("#sv1ip_set").val(),
	        	"ip2" : $("#sv2ip_set").val(),
	        	"vip" : $("#vip_set_text").val()
	        	//"sync" : $("#serversync").val(),
	        	
	        },

	        success : function(responseData){
	            //$("#ajax").remove();
	            //data=responseData;
	            console.log(responseData);
	            if(responseData==0){
	            	alert("성공적으로 저장되었습니다.");
	            	$('#vip_setting').modal('hide');
	            	window.location.reload();
	            }else
	            {
	            	alert("저장에 실패했습니다.");
	            }
	            
	           // makeImg(data.server1_ip);
	           // makeImg(data.server2_ip);
	        }
	    });
   }
   
   function sync_setting()
   {
	   
	   $.ajax({
	        url : "../../sync_setting.tdo",
	        type: "post",
	        data:{
	        	"s_num" : s_num,
	        	"sync1_origin" : $("#syncto1").val(),
	        	"sync1_remote" : $("#syncfrom1").val(),
	        	"sync1_id" : $("#syncid1").val(),
	        	"sync1_pw" : $("#syncpw1").val(),
	        	"sync2_origin" : $("#syncto2").val(),
	        	"sync2_remote" : $("#syncfrom2").val(),
	        	"sync2_id" : $("#syncid2").val(),
	        	"sync2_pw" : $("#syncpw2").val()
	        },

	        success : function(responseData){
	            //$("#ajax").remove();
	            //data=responseData;
	            console.log(responseData);
	            if(responseData==0){
	            	alert("성공적으로 저장되었습니다.");
	            	$('#dataSyn').modal('hide');
	            	window.location.reload();
	            }else
	            {
	            	alert("저장에 실패했습니다.");
	            }
	            
	           // makeImg(data.server1_ip);
	           // makeImg(data.server2_ip);
	        }
	    });
   }
   
   function sync(){
	   
	   var ck=getCheck("synck");
	   
	   if(ck=="")
	   {
			alert("동기화 할 목록을 체크해주세요");
			return;
	   }
	   
	   
	   var txt=$("#data_sync").text().trim();
	   
	   if(txt=="데이터 동기화 실행")
		{
			sync_play(ck);
			$("#data_sync").button("sh");
		}else
		{
			sync_stop();
			$("#data_sync").button("reset");
		}
	   
   }
   
   function cmdSend()
   {
	   var ck=getCheck("cmdck");
	   
	   var cmd=$("#cmd").val().trim();
	   
	   if(ck=="")
	   {
			alert("서버를 선택해주세요");
			return;
	   }
	   
	   	   	   
	   $.ajax({
	        url : "../../webConsole.tdo",
	        type: "post",
	        data:{
	        	"cmd" : cmd,
	        	"check" : ck
	        },

	        success : function(responseData){
	            //$("#ajax").remove();
	            //data=responseData;
	            var txtarea=$("#result");
	            
	            console.log(responseData);
	            
	            txtarea.append(cmd+"\n");
	            
	            
	            for(var j=1;j<=responseData.length;j++)
            	{
		            txtarea.append("Server IP : "+eval("responseData.ip"+j)+"\n");
		            
		            var dda=eval("responseData.result"+j);
		            
		            console.log(dda);
		            
		            for(var i=0;i<dda.length;i++)
		            {
		            	txtarea.append(dda[i]+"\n");
		            }
	            
            	}
	            
	            
	            $("#cmd").val("");

	        }
	    });
   }
   
   function getCheck(name)
   {  //$("input[name='synck']:checked")
	   var cbox=$("input[name='"+name+"']:checked");
   
   	   var max=cbox.length;
   	   
   	   if(max<1)
   		{
   			return "";   
   		}
   	   
   	   var result="";
	   
   		for(var i=0;i<max;i++)
   		{
   			//console.log(d);
			//console.log(cbox[i].value);
			result=result+cbox[i].value+",";
   		}
   		
   		result=result.substr(0,result.length-1);
   		
   		return result;
   		
   }
   
   
   function sync_play(ck)
   {
	   review();
	   
	   
	   var pri=$("#imagebox_1.active, #imagebox_2.active");
	   
	   if(pri.length>0 && pri.length<2)
	   {
		   
	   		var activenum=pri[0].id.substr(pri[0].id.length-1,1);;
	   
		   $.ajax({
		        url : "../../sync_play.tdo",
		        type: "post",
		        data:{
		        	"s_num" : activenum,
		        	"check" : ck
		        },
	
		        success : function(responseData){
		            //$("#ajax").remove();
		            //data=responseData;
		            console.log(responseData);
	 
		        }
		    });
	   
		}else
		{
			alert("동기화를 실행할 수 없습니다.");	
		}
   }
   
   function sync_stop(){
	   $.ajax({
	        url : "../../sync_stop.tdo",
	        type: "post",
	        
	        success : function(responseData){
	            //$("#ajax").remove();
	            //data=responseData;
	            console.log(responseData);

	        }
	    });
	   
   }
   
   
   function ssh_test(ip,cmd,sn,box)
   {
		    $.ajax({
		        url : "../../ssh.tdo",
		        type: "get",
		        async: false,
		        data : { "ip" : ip,
		        		  "cmd" : cmd,
		        		  "s_num" : sn},
		      
		        success : function(responseData){
		            //$("#ajax").remove();
		            var data=responseData;
		            console.log(data);
		            console.log(box);
		            if(cmd=="cpu")
		            {
		            	alert(data.data);	
		            }else if(cmd=="os")
		            {
		            	alert(data.os);
		            }else if(cmd=="mem")
		            {
		            	alert(data.data);
		            }else if(cmd=="dh")
		            {
		            	alert(data.data);
		            }else if(cmd=="standby")
		            {
		            	alert("성공했음");	
		            }else if(cmd="lock")
		            {
		            	alert("lock 성공");
		            }else if(cmd="unlock")
		            {
		            	alert("unlock 성공");
		            }
		        }
		    });
		    
		    //console.log("언제 실행");
		
   }
   
   function sync_stat()
   {
	   $.ajax({
	        url : "../../sync_stat.tdo",
	        type: "get",
	        async: false,
	        success : function(responseData){
	        	console.log("동기화"+responseData)
	        	if(responseData==1)
            	{
	        		console.log("1이면 동기화 중이지 않은거");
            		$("#data_sync").button("reset");
            	}else
            	{
            		console.log("0이면 동기화 중인거");
            		$("#data_sync").button("sh");
            	}
	        	
	        }
	   });
   }
   
   function lock_stat()
   {
	   $.ajax({
	        url : "../../lock_stat.tdo",
	        type: "get",
	        async: false,
	        success : function(responseData){
	        	
	        	console.log(responseData);
	        	console.log("락"+responseData.lock_state);
	        	
	        	if(responseData.lock_stat=="1")
            	{
	        		console.log("1이면 unlock 상태");
	        		$("#lock").button("reset");
            	}else
            	{
            		console.log("0이면 lock 상태");
            		$("#lock").button("jh");
            	}
	        	
	        	
	        	var linkstat=$("#link_stat");
	        	var linksolid=$("#link_solid");
	        	
	        	if(responseData.link_status>=2)
	        	{
	        		linkstat.text("Link Success");
	        		linkstat.removeClass();
	        		linkstat.toggleClass("label label-success");
	        		linksolid.attr("style","border: solid 5px green");
	        	}else
	        	{
	        		linkstat.text("Link Fail");
	        		linkstat.removeClass();
	        		linkstat.toggleClass("label label-danger");
	        		linksolid.attr("style","border: solid 5px red");
	        	}
	        		
	        		
	        	
	        	
	     	   for(var i=0;i<$("div[id*=imagebox]").length;i++)
			   	{
			   		   //var temp=$("#box").children()[i];
			   		   var temp=$("div[id*=imagebox]")[i];
			   		   var ip=temp.innerText.trim();
			   		   console.log(ip);
			   		   
			   		   if(ip==responseData.ip)
			   			{
			   				temp.innerHTML=temp.innerHTML.replace("label label-danger","label label-primary");
	            			temp.setAttribute("class",'active');
			   			}else
			   			{
			   				temp.innerHTML=temp.innerHTML.replace("label label-primary","label label-danger");
		            		temp.removeAttribute("class");
			   			}
			   		   
			   		   
			   	}
	        	
	        	/* if(data.length>1)
	            	{
	            		//box.children("h3").children("span").attr("class","label label-primary");
	            		box.innerHTML=box.innerHTML.replace("label label-danger","label label-primary");
	            		box.setAttribute("class",'active');
	            		//console.log("ㅋㅋㅋㅋ");
	            }else
	            	{
	            		//box.children("h3").children("span").attr("class","label label-danger");
	            		box.innerHTML=box.innerHTML.replace("label label-primary","label label-danger");
	            		box.removeAttribute("class");
	            		//console.log("ㅋㅋㅋㅋ2");
	            	} */
	            	
	            	
	            }
	        	
	        
	   });
   }
   
   
   function review()
   {

	   sync_stat();
	   lock_stat();
   }
   
   function sqltest()
   {
	   $("#adding").bind("click",function(){
		    $.ajax({
		        url : "../../test.tdo",
		        type: "get",
		        data : { 
		        	"sql" : 'query.test',
		        	"id" : '1234',
		        	"param" :'{a:b,c:d}'
		        	},
		        
		        success : function(responseData){
		            //$("#ajax").remove();
		            //var data = JSON.parse(responseData);
		            var data=responseData;
		            console.log(data);
		            if(!data){
		                alert("존재하지 않는 ID입니다");
		                return false;
		            }
		        }
		    });
		});
   }
   
  
   function makeImg(ip){
	   
	 
	   var lb='';

	   c=c+1;
	   
	   var div=document.createElement("div");
	   div.id="imagebox_"+c;
	   
	   div.style="flex:1";
	   
	   
	   
	   var img=document.createElement("img");
	       img.src="../com.png";
	       img.width="100"; img.height="100";
	       img.id='img_'+c;
	       
	       if(c==1){
	       		//img.align="left"
	       		//lb="<h3><span class='label label-primary' align='left'>"+ip+"</span></h3>";
	       		lb="<h3><span class='label label-primary'>"+ip+"</span></h3>";
	       		div.align="left";
	       		$("#linkbox").before(div);
	       }
	       	else{
	       		//img.align="right"	
	       		//lb="<h3><span class='label label-primary' align='right'>"+ip+"</span></h3>";
	       		lb="<h3><span class='label label-primary'>"+ip+"</span></h3>";
	       		//lb="<h3><span id=lblb"+c+" class='label label-primary'>"+ip+"</span></h3>";
	       		div.align="right";
	       		$("#linkbox").after(div);
	       		
	       	}
	       //document.body.appendChild(img);
	       //$("#imagebox").append(img);
	       //$("#imagebox").append(lb);
	       //$("#box").append(div);
	       $("#imagebox_"+c+"").append(img);
	       $("#imagebox_"+c+"").append(lb);
	       $("#imagebox_"+c+"").contextMenu({
			    menuSelector: "#contextMenu",
			    menuSelected: context_excute
			        
			    
			});
	   }
   
   </script>
</body>

</html>

